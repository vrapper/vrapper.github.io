<h2>Command-Line Commands</h2>

This page describes the commands available within the command-line <code>:</code> mode.<br/><br/>

Commands may be chained with a <code>|</code> character between them. For example:<br/>
<code>:'&lt;,'&gt;s/foo/bar/g  |  '&lt;,'&gt;s/baz/bat/g</code>
<br/><br/>

Vrapper allows abbreviated commands only when there are no conflicts (e.g. custom commands defined in <code>.vrapperrc</code>).
<br/><br/>

<table class="commands">
    <tr>
        <th>Command</th>
        <th>Description</th>
    </tr>
    <tr>
        <td>:w<br/>:update</td>
        <td>Writes the edited file to disk.</td>
    </tr>
    <tr>
        <td>:wa[ll]</td>
        <td>Writes all edited files to disk.</td>
    </tr>
    <tr>
        <td>:q</td>
        <td>Closes the editor if nothing was changed since the last save.</td>
    </tr>
    <tr>
        <td>:qall</td>
        <td>Closes all editors if nothing was changed since the last save.</td>
    </tr>
    <tr>
        <td>:wq<br />:x</td>
        <td>Writes the edited file to disk and closes the editor.</td>
    </tr>
    <tr>
        <td>:wqall<br />:xall</td>
        <td>Writes all edited files to disk and closes all editors.</td>
    </tr>
    <tr>
        <td>:q!</td>
        <td>Closes the editor even if there are unsaved changes.</td>
    </tr>
    <tr>
        <td>:u<br />:undo</td>
        <td>Undoes the last change.</td>
    </tr>
    <tr>
        <td>:red[o]</td>
        <td>Redoes an undone change.</td>
    </tr>
    <tr>
        <td>:fm<br />:format</td>
        <td>
            Calls the formatter of the underlying editor if present.<br />
            The formatter will be applied to the current selection
            or the whole text if nothing is selected.
        </td>
    </tr>
    <tr>
        <td>:ascii</td>
        <td>Display the ascii value of the character under the cursor</td>
    </tr>
    <tr>
        <td>:&lt;number&gt;</td>
        <td>Jumps to line <code>&lt;number&gt;</code>.</td>
    </tr>
    <tr>
        <td>:e[dit] &lt;filename&gt;</td>
        <td>
            Opens a file relative to the current working directory.<br/>
            If <code>&lt;filename&gt;</code> doesn't exist, create a new file in the current working directory.
        </td>
    </tr>
    <tr>
        <td>:e[dit]</td>
        <td>Refresh current file</td>
    </tr>
    <tr>
        <td>:e[dit]!</td>
        <td>Revert changes to current file</td>
    </tr>
    <tr>
        <td>:cd &lt;directory&gt;</td>
        <td>Changes current working directory (used by <code>:e[dit]</code> command).</td>
    </tr>
    <tr>
        <td>:pwd</td>
        <td>Print current working directory.</td>
    </tr>
    <tr>
        <td>:find &lt;filename&gt;<br/>:tabfind &lt;filename&gt;</td>
        <td>Opens a file found in the list of directories defined by <code>path</code> variable.</td>
    </tr>
    <tr>
        <td>:tabnext<br/>:bn[ext]</td>
        <td>Move to next Eclipse editor (tab)</td>
    </tr>
    <tr>
        <td>:tabprevious<br/>:bp[revious]</td>
        <td>Move to previous Eclipse editor (tab)</td>
    </tr>
    <tr>
        <td>:tabrewind</td>
        <td>Move to first Eclipse editor (tab)</td>
    </tr>
    <tr>
        <td>:tablast</td>
        <td>Move to last Eclipse editor (tab)</td>
    </tr>
    <tr>
        <td>:files</td>
        <td>
            List all open files in the current block of editors in the Eclipse UI.
            Editors which are open in another split are not listed.
        </td>
    </tr>
    <tr>
        <td>:buffers<br/>:ls</td>
        <td>
            List all recently-seen buffers and their ids. The currently active buffer is
            marked with '%', the previously active buffer is marked with '#'.
        </td>
    </tr>
    <tr>
        <td>:b[uffer ]&lt;buffer id&gt;</td>
        <td>
            Switch to the buffer with the given id. The special '%' and '#' ids are also
            allowed. See <code>:buffers</code> above.
        </td>
    </tr>
    <tr>
        <td>:bd[elete]</td>
        <td>Close current editor (tab)</td>
    </tr>
    <tr>
        <td>:only<br/>:tabonly</td>
        <td>Close all "other" Eclipse editors (close other tabs)</td>
    </tr>
    <tr>
        <td>:tabnew</td>
        <td>Invoke Eclipse's New File dialog</td>
    </tr>
    <tr>
        <td>:tabs</td>
        <td>Display open files (tabs)</td>
    </tr>
    <tr>
        <td>:noh[lsearch]</td>
        <td>Clear the current search highlight without disabling the search highlight feature.</td>
    </tr>
    <tr>
        <td>:source &lt;filename&gt;</td>
        <td>Include another config file (e.g. <code>:source .vimrc</code>) to extend current configuration</td>
    </tr>
    <tr>
        <td>:let @&lt;char&gt;=&lt;register contents&gt;</td>
        <td>
            <p>
                Programmatically set register contents for register
                <code>&lt;char&gt;</code>.  Register can then be executed as a
                macro.<br/><br/>You can also set the contents of one register
                to the contents of another with @&lt;char&gt;=@&lt;char&gt;.
            </p>
            <p>
                Note that the search register is special: setting it to an empty
                string will clear search highlighting, setting it to a given value
                will activate a search query for the given string with defaults
                (forward, any part of a word, ...) or use settings from the
                last given search query after which the highlighting will be
                updated (when <code>hlsearch</code> is enabled).
            </p>
        </td>
    </tr>
    <tr>
        <td>:command &lt;name&gt; &lt;command&gt;</td>
        <td>
            Defines a custom command-line command <code>&lt;name&gt;</code> which will execute the command <code>&lt;command&gt;</code>.
            Note that <code>&lt;command&gt;</code> can use <code>|</code> to chain multiple commands to a single <code>&lt;name&gt;</code>.
            <br/><br/>
            Example:</br>
            <code>:command MyReplace s/foo/bar/g | s/baz/bat/g</code><br/>
            would be executed with <code>:MyReplace</code>
        </td>
    </tr>
    <tr>
        <td>:&lt;range&gt;!&lt;command&gt;</td>
        <td>
            Execute a shell command with the text from the given range as input, replacing that text with the output.<br/>
            Examples:
            <ul>
                <li><code>:%!xmllint --format -</code></li>
                <li><code>:'&lt;,'&gt;!tr -d [:space:]</code></li>
            </ul>
        </td>
    </tr>
    <tr>
        <td>:r!&lt;command&gt;</td>
        <td>Execute a shell command and insert the output.</td>
    </tr>
    <tr>
        <td>:move [line number]</td>
        <td>Move current line to [line number]</td>
    </tr>
    <tr>
        <td>:copy [line number]</td>
        <td>Copy current line to [line number]</td>
    </tr>
    <tr>
        <td>:autocmd &lt;editor type&gt; &lt;command&gt;</td>
        <td>
            Execute a .vrapperrc &lt;command&gt; only if the current editor is of Eclipse editor type &lt;editor&nbsp;type&gt;.
            The &lt;editor&nbsp;type&gt; is the "registered name" of the Eclipse "part".<br/><br/>
            For example:
            <ul>
                <li><code>autocmd "C/C++ Editor" eclipseaction gv org.eclipse.cdt.ui.edit.text.c.select.last</code></li>
                <li><code>autocmd "CMake Editor" nnoremap &lt;CR&gt; gf</code></li>
            </ul>
        </td>
    </tr>
    <tr>
        <td><nobr>:[%]s/&lt;search&gt;/&lt;replace&gt;/[g|c|i|I]</nobr></td>
        <td>
            The famous substitution feature.
            <ul>
                <li>Supports flags <code>g</code> for global (all matches), <code>c</code> for confirmation, <code>i</code> for case-insensitive</li>
                <li>Supports <code>%</code> for performing substitution on all lines<br/>(e.g., <code>:%s/foo/bar/</code>)</li>
                <li>Whatever non-alphanumeric character is after <code>:s</code> will be the delimiter<br/>(e.g., <code>:s_foo_bar_</code>)</li>
                <li>Uses Eclipse's flavor of regex<br/>(e.g., <code>:s/foo(.+)foo/bar$1bar/</code>)</li>
            </ul>
        </td>
    </tr>
    <tr>
        <td>:&lt;range&gt;,&lt;range&gt;[y|d|s|c|t|m]</td>
        <td>
            Perform either the yank (<code>y</code>), delete (<code>d</code>), substitution (<code>s</code>), copy (<code>c</code>, <code>t</code>), or move (<code>m</code>) operation on a range of lines.
            <table>
                <tr>
                    <td style="border:none">
                        Supports:<br/>
                        <ul>
                            <li><code>number</code> for specific line number</li>
                            <li><code>.</code> for current line</li>
                            <li><code>$</code> for last line in the file</li>
                            <li><code>?&lt;pattern&gt;?</code> for first match above current line</li>
                            <li><code>/&lt;pattern&gt;/</code> for first match below current line</li>
                            <li><code>'&lt;a-x&gt;</code> for mark</li>
                            <li>You can also add modifiers <code>+</code>/<code>-</code></li>
                        </ul>
                    </td>
                    <td style="border:none">
                        Examples:<br/>
                        <ul>
                            <li><code>:3,5d</code></li>
                            <li><code>:3,5y</code></li>
                            <li><code>:.,$y</code></li>
                            <li><code>:.+3,$-2y</code></li>
                            <li><code>:2,5s/foo/bar/g</code></li>
                            <li><code>:1,/foo/d</code></li>
                            <li><code>:'a,'bd</code></li>
                            <li><code>:?something?,+4y</code></li>
                            <li><code>:?something?,/foo/y</code></li>
                            <li><code>:10,20 copy 140</code></li>
                            <li><code>:15,35 move 110</code></li>
                        </ul>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td><nobr>:[range,range]sort[!] [/pattern/] [i|n|x|o|u]</nobr></td>
        <td>
            Sort lines in entire file or over specified range.
            <ul>
                <li>Supports <code>!</code> flag for reverse sort</li>
                <li>Supports <code>i</code> flag for case-insensitive sort</li>
                <li>Supports <code>n</code> flag for numeric sort</li>
                <li>Supports <code>x</code> flag for hex-numeric sort</li>
                <li>Supports <code>o</code> flag for octal-numeric sort</li>
                <li>Supports <code>u</code> flag for unique sort (remove duplicates)</li>
                <li>
                    Supports <code>/pattern/</code> to only sort lines (within the range) which include <code>/pattern/</code>
                    <ul>
                        <li>Strings only, no regex</li>
                        <li>Sort will compare the text at cursor position after the <code>/pattern/</code> match</li>
                    </ul>
                </li>
            </ul>
        </td>
    </tr>
    <tr>
        <td>:retab[!] [new_tabstop]</td>
        <td>
            Replace all tabs with spaces (or spaces with tabs) within the file.
            <ul>
                <li>If <code>!</code> is specified, replace all spaces with equivalent number of tabs</li>
                <li>
                    If <code>new_tabstop</code> is specified, replace each tab with the given number of
                    spaces rather than the value stored in <code>tabstop</code> config property.
                </li>
            </ul>
            If neither <code>!</code> nor <code>new_tabstop</code> is specified, the behavior is determined by the <code>expandtab</code> and <code>tabstop</code>
            config properties.
        </td>
    </tr>
    <tr>
        <td>
            :g/&lt;pattern&gt;/[d|s|normal]<br/>
            :g!/&lt;pattern&gt;/[d|s|normal]<br/>
            :v/&lt;pattern&gt;/[d|s|normal]
        </td>
        <td>
            Perform an operation on all lines that match <code>pattern</code>.  Or, in the case of <code>:g!</code> and <code>:v</code>, all lines that <b>don't</b> match <code>pattern</code>.<br/>
            Operations are:
            <ul>
                <li><code>d</code> to delete those lines<br/><code>:g/foo/d</code></li>
                <li><code>s</code> to perform substitution on those lines<br/><code>:g/foo/s/something/else/g</code></li>
                <li>
                    <code>normal</code> to perform (basic) normal-mode commands on those lines<br/><code>:g/foo/normal wwdw</code><br/>
                    This basically executes an anonymous macro on all lines that match (or don't match, for <code>:g!</code> and <code>:v</code>).
                    Special keys are defined like in mappings.  For example, <code>&lt;esc&gt;</code>
                </li>
            </ul>
        </td>
    </tr>
    <tr>
        <td>:startinsert[!]</td>
        <td>Start in insertmode (only useful as the last line of a .vrapperrc file)</td>
    </tr>
    <tr>
        <td>:vim</td>
        <td>
            The current active file in Eclipse is opened in a new gvim window.  Cursor is on the exact same line
            and column as it was in Eclipse.  This allows you to perform any operation in gvim which Vrapper doesn't support.
            After you save the file and exit gvim (<code>:wq</code>) Eclipse will reload the file with your changes.
            <br/><br/>
            Path to gvim is determined by <code>gvimpath</code> property (defaults to <code>/usr/bin/gvim</code>).<br/>
            Arguments for gvim is determined by <code>gvimargs</code> property.<br/>
        </td>
    </tr>
    <tr>
        <td>:maximize</td>
        <td>Maximize this editor tab in Eclipse.  Run again to restore editor size.</td>
    </tr>
    <tr>
        <td>:eclipseaction[!]&nbsp;&lt;name&gt;&nbsp;&lt;id&gt;</td>
        <td>
            Binds the Eclipse action with the specified id to a (command line mode) command &lt;name&gt;.<br />
            There are lists with action ids for
            <a href="http://help.eclipse.org/help33/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/texteditor/IWorkbenchActionDefinitionIds.html">workbench</a>,
            <a href="http://help.eclipse.org/help33/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/texteditor/ITextEditorActionDefinitionIds.html">text editors</a>,
            and <a href="http://help.eclipse.org/ganymede/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/ui/actions/IJavaEditorActionDefinitionIds.html">java editors</a>.
            <br/><br/>
            For example, if you wanted to define an action for JDT's "Find all References in Workspace" you can put the following in the .vrapperrc file:<br/>
            <code>eclipseaction findref org.eclipse.jdt.ui.edit.text.java.search.references.in.workspace</code><br/>
            This command can then be called with <code>:findref</code><br/>
            The action can be mapped to keys, for example <code>gr</code>:<br/>
            <code>nmap gr :findref&lt;enter&gt;</code><br/>
            If <code>!</code> is passed any existing command binding will be overwritten!
        </td>
    </tr>
    <tr>
        <td>:eclipseuiaction[!]&nbsp;&lt;name&gt;&nbsp;&lt;id&gt;</td>
        <td>Similar to <code>:eclipseaction</code> except it handles commands which display (or may display) a popup or dialog.</td>
    </tr>
</table>
